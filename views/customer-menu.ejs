<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menu | Visista Bojana</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <style>
    /* --- Base Variables --- */
    :root {
      --primary: #c27a09; /* Your original Gold */
      --secondary: #2c3e50; /* Your original Dark Blue */
      --bg-color: #f4f7f6;
      --card-bg: #ffffff;
      --text-dark: #1c1c1c;
      --text-gray: #696969;
    }

    body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #fdfbfb, #ebedee);
  margin: 0;
  padding: 0;
  color: var(--text-dark);
}


    /* --- Header (Your Original Style) --- */
    header {
  background: linear-gradient(90deg, #2c3e50, #34495e);
  color: white;
  padding: 22px;
  text-align: center;
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  position: sticky;
  top: 0;
  z-index: 100;
}


    header h1 { margin: 0; font-size: 1.8rem; }
    
    .back-link {
      color: #ddd;
      text-decoration: none;
      font-size: 0.9rem;
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
    }

    /* --- Layout Container --- */
    .main-container {
      max-width: 1200px;
      margin: 30px auto;
      padding: 0 20px;
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 30px;
    }

    /* --- Preference Panel (Your Original Style) --- */
    .preference-panel {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      margin-bottom: 25px;
      border: 1px solid #eee;
    }

    .section-title {
      font-size: 1.4rem;
      margin-bottom: 20px;
      font-weight: 800;
      color: var(--text-dark);
    }

    .order-type-selector {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
    }

    .type-option { flex: 1; position: relative; }
    .type-option input { display: none; }
    
    .type-option label {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 15px;
      background: #f0f0f5;
      border: 2px solid transparent;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: 0.3s;
    }

    .type-option input:checked + label {
      background: #fff8e1;
      border-color: var(--primary);
      color: var(--primary);
    }

    #address-section {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease-out;
    }
    #address-section.visible { max-height: 200px; margin-top: 15px; }

    .input-field {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-family: inherit;
      outline: none;
      box-sizing: border-box;
    }

    /* --- NEW CARD DESIGN (Attractive Style) --- */
    .menu-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 25px;
    }

   .food-card {
  background: rgba(255,255,255,0.95);
  border-radius: 22px;
  overflow: hidden;
  transition: all 0.3s ease;
  cursor: pointer;
  border: 1px solid rgba(0,0,0,0.05);
  box-shadow: 0 15px 25px rgba(0,0,0,0.12);
  animation: fadeInUp 0.6s ease;
}

    .food-card:hover {
  transform: translateY(-8px) scale(1.01);
  box-shadow: 0 25px 40px rgba(0,0,0,0.18);
}

    /* Image Container */
    .card-image-wrapper {
  position: relative;
  height: 190px;
  width: 100%;
  background: linear-gradient(120deg, #f6d365, #fda085);
}

    .card-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* The "Dark Overlay" at bottom of image for text readability */
    .img-gradient {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
      z-index: 1;
    }

    /* The "ITEMS AT ‚Çπ99" Badge style */
    .price-overlay {
  position: absolute;
  bottom: 12px;
  left: 15px;
  z-index: 2;
  background: rgba(0,0,0,0.7);
  padding: 6px 12px;
  border-radius: 20px;
  color: #fff;
  font-weight: 800;
  font-size: 0.95rem;
  letter-spacing: 0.5px;
}

    /* Card Details */
    .card-info {
      padding: 15px;
    }

    .card-title {
      font-size: 1.1rem;
      font-weight: 700;
      margin: 0 0 5px 0;
      color: #1a1a1a;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .rating-row {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 0.9rem;
      font-weight: 600;
      color: #333;
    }

    .rating-icon {
      color: #fff;
      background-color: #24963f; /* Standard Rating Green */
      border-radius: 50%;
      padding: 3px;
      font-size: 0.6rem;
      width: 14px;
      height: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .time-text {
      color: #7e808c;
      font-weight: 400;
    }

    .cuisine-text {
      font-size: 0.85rem;
      color: #7e808c;
      margin-top: 5px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    /* Add Button Area */
    .add-action-area {
        margin-top: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .add-btn-styled {
  background: linear-gradient(135deg, #27ae60, #2ecc71);
  border: none;
  color: white;
  font-weight: 700;
  padding: 7px 22px;
  border-radius: 20px;
  cursor: pointer;
  text-transform: uppercase;
  font-size: 0.85rem;
  box-shadow: 0 6px 12px rgba(46,204,113,0.4);
}
    
   .add-btn-styled:hover {
  transform: scale(1.05);
  box-shadow: 0 10px 20px rgba(46,204,113,0.6);
}

    .qty-select {
        width: 40px;
        padding: 4px;
        border: 1px solid #ddd;
        border-radius: 4px;
        text-align: center;
    }


    /* --- BILL SIDEBAR (YOUR ORIGINAL STYLE RESTORED) --- */
    .bill-panel {
  background: linear-gradient(180deg, #ffffff, #f8f9fa);
  padding: 25px;
  border-radius: 18px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.15);
  height: fit-content;
  position: sticky;
  top: 100px;
}


    .bill-header {
      text-align: center;
      border-bottom: 2px dashed #ddd;
      padding-bottom: 15px;
      margin-bottom: 15px;
    }

    .bill-list {
      list-style: none;
      padding: 0;
      margin: 0;
      max-height: 300px;
      overflow-y: auto;
    }

    .bill-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 0.9rem;
      border-bottom: 1px solid #eee;
      padding-bottom: 5px;
    }

    .bill-total {
      margin-top: 20px;
      padding-top: 15px;
      border-top: 2px solid var(--secondary);
      display: flex;
      justify-content: space-between;
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--secondary);
    }

    .action-buttons {
      margin-top: 20px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .btn-action {
      padding: 10px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      color: white;
    }

    .btn-reset { background: #e74c3c; }
    .btn-print { background: var(--secondary); }
    .btn-print:hover { background: #1e8449; }

    /* Print Styles */
    @media print {
      body { background: white; }
      header, .preference-panel, .menu-grid, .btn-reset, .back-link, .controls { display: none; }
      .main-container { display: block; }
      .bill-panel { 
        box-shadow: none; 
        width: 100%; 
        border: 2px solid #000;
      }
      .bill-list { max-height: none; }
    }
    
    @media (max-width: 768px) {
      .main-container { grid-template-columns: 1fr; }
      .bill-panel { position: static; }
      .back-link { display: none; }
    }
    @media print {
  body {
    margin: 0; /* Remove default page margins */
    padding: 0;
  }

  .bill-container {  /* Replace with your bill wrapper class */
    width: 100%;      /* Make it fit the page width */
    box-sizing: border-box;
    overflow: visible; /* Avoid content getting hidden */
  }

  /* Optional: adjust font sizes for print */
  .bill-container * {
    font-size: 12pt;
  }
}
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

  </style>
</head>
<body>

  <header>
    <a href="/" class="back-link"><i class="fas fa-arrow-left"></i> Back to Home</a>
    <h1><i class="fas fa-utensils"></i> Visista Bojana Menu</h1>
  </header>

  <div class="main-container">
    
    <div class="menu-section">
      
      <div class="preference-panel">
        <h3 class="section-title">Dining Preference</h3>
        <div class="order-type-selector">
          <div class="type-option">
            <input type="radio" id="dine-in" name="orderType" value="Dine-In" checked onchange="toggleAddress(false)">
            <label for="dine-in"><i class="fas fa-chair"></i> Dine In</label>
          </div>
          <div class="type-option">
            <input type="radio" id="delivery" name="orderType" value="Delivery" onchange="toggleAddress(true)">
            <label for="delivery"><i class="fas fa-motorcycle"></i> Delivery</label>
          </div>
        </div>
        <div id="address-section">
          <label style="font-size: 0.9rem; font-weight: 600; color:var(--text-gray);">Delivery Address:</label>
          <input type="text" id="customerAddress" class="input-field" placeholder="Enter House No, Street, Landmark...">
        </div>
      </div>

      <h3 class="section-title">Today's Menu</h3>
      <p style="margin-bottom: 20px; color: #1a6d38; font-size: 0.95rem;">
  From wholesome veg meals to delightful ice creams ‚Äî we serve happiness on every plate.
</p>
      <div class="menu-grid">
        <% foods.forEach((f, index) => { %>
          <div class="food-card">
            <div class="card-image-wrapper">
              <img 
  src="/uploads/<%= f.image %>" 
  class="card-img" 
  alt="<%= f.name %>"
  onerror="this.src='https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=500&auto=format&fit=crop&q=60'"
>
              <div class="img-gradient"></div>
              <div class="price-overlay">ITEMS AT ‚Çπ<%= f.price %></div>
            </div>

            <div class="card-info">
              <h3 class="card-title"><%= f.name %></h3>
              
              <div class="rating-row">
  <div class="rating-icon"><i class="fas fa-star"></i></div>
 <span><%= (Math.random() * (5 - 4) + 4).toFixed(1) %></span>

</div>


              <div class="add-action-area">
                  <input type="number" min="1" value="1" id="qty-<%= f.id %>" class="qty-select">
                  <button class="add-btn-styled"
                    data-name="<%= f.name %>"
                    data-price="<%= f.price %>"
                    data-id="<%= f.id %>"
                    onclick="addToBill(this)">
                    ADD <i class="fas fa-plus" style="font-size:0.8rem;"></i>
                  </button>
              </div>
            </div>
          </div>
        <% }) %>
      </div>

    </div>

    <div class="sidebar">
      <div class="bill-panel" id="billBox">
        <div class="bill-header">
          <h2>üßæ Your Bill</h2>
          <p id="bill-mode-display" style="font-size: 0.9rem; color: #666;">Mode: Dine-In</p>
          <p id="bill-address-display" style="font-size: 0.8rem; color: #666; display:none;"></p>
        </div>
        
        <ul class="bill-list" id="billItems">
          <li style="text-align: center; color: #999; font-style: italic;" id="empty-msg">No items added yet</li>
        </ul>

        <div class="bill-total">
          <span>Total:</span>
          <span>‚Çπ<span id="totalAmount">0</span></span>
        </div>

        <div class="action-buttons">
          <button class="btn-action btn-reset" onclick="resetBill()">Reset</button>
          <button class="btn-action btn-print" onclick="printBill()">Print Bill</button>
        </div>
      </div>
    </div>

  </div>

<script>
  let total = 0;
  let orderMode = "Dine-In";

  function toggleAddress(isDelivery) {
    const addrSection = document.getElementById('address-section');
    const modeDisplay = document.getElementById('bill-mode-display');
    const addrDisplay = document.getElementById('bill-address-display');
    
    if (isDelivery) {
      addrSection.classList.add('visible');
      orderMode = "Home Delivery";
      modeDisplay.innerText = "Mode: üõµ Home Delivery";
      addrDisplay.style.display = "block";
    } else {
      addrSection.classList.remove('visible');
      orderMode = "Dine-In";
      modeDisplay.innerText = "Mode: üçΩ Dine-In";
      addrDisplay.style.display = "none";
    }
  }

  document.getElementById('customerAddress').addEventListener('input', function(e) {
    const addrDisplay = document.getElementById('bill-address-display');
    addrDisplay.innerText = "üìç " + e.target.value;
  });

  function addToBill(btnElement) {
    const name = btnElement.getAttribute('data-name');
    const price = parseInt(btnElement.getAttribute('data-price'));
    const id = btnElement.getAttribute('data-id');
    const qtyInput = document.getElementById('qty-' + id);
    const qty = parseInt(qtyInput.value);

    if (qty <= 0) { alert("Please select a valid quantity"); return; }

    const emptyMsg = document.getElementById('empty-msg');
    if (emptyMsg) emptyMsg.remove();

    const itemTotal = price * qty;
    total += itemTotal;

    const li = document.createElement("li");
    li.className = "bill-item";
    li.innerHTML = `
      <span>${name} <small>x${qty}</small></span>
      <span>‚Çπ${itemTotal}</span>
    `;

    document.getElementById("billItems").appendChild(li);
    document.getElementById("totalAmount").textContent = total;
    qtyInput.value = 1;
    
    // Quick Visual Feedback
    const originalText = btnElement.innerHTML;
    btnElement.innerHTML = "ADDED";
    btnElement.style.backgroundColor = "#24963f";
    btnElement.style.color = "white";
    setTimeout(() => {
        btnElement.innerHTML = originalText;
        btnElement.style.backgroundColor = "white";
        btnElement.style.color = "#24963f";
    }, 800);
  }

  function resetBill() {
    if(!confirm("Are you sure you want to clear the bill?")) return;
    total = 0;
    const list = document.getElementById("billItems");
    list.innerHTML = '<li style="text-align: center; color: #999; font-style: italic;" id="empty-msg">No items added yet</li>';
    document.getElementById("totalAmount").textContent = "0";
    document.getElementById("customerAddress").value = "";
  }

  function printBill() {
    if (total === 0) { alert("Your cart is empty!"); return; }
    if (orderMode === "Home Delivery") {
      const addr = document.getElementById("customerAddress").value;
      if (addr.trim() === "") {
        alert("Please enter a delivery address before printing.");
        document.getElementById("customerAddress").focus();
        return;
      }
    }
    window.print();
  }
</script>

</body>
</html>